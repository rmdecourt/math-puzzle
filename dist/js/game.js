var MathPuzzle;!function(t){var e=function(){function e(t){this._cells=[],this._controller=t,this.initializeBoard(),this.bindEvents()}return e.prototype.bindEvents=function(){var t=this;$("#board").on("click","td",function(e){t.notifyController(t._cells[Number($(e.target).attr("id"))])})},e.prototype.notifyController=function(t){this._controller.notify(t)},e.prototype.initializeBoard=function(){var e=$("<table></table>");e.attr("id","board");for(var l=$("<tr></tr>"),o=0;o<=100;o++){o%10==0&&(e.append(l),l=$("<tr></tr>"));var n=$("<td></td>");n.attr("id",o),l.append(n),this._cells.push(new t.Cell(n))}$(t.Configuration.placeholderId).append(e)},e.prototype.activeCells=function(t){var e=this;t.forEach(function(t){return e._cells[t].activateCell()})},e.prototype.deactivateCells=function(t){var e=this;t.forEach(function(t){return e._cells[t].deactiveCell()})},Object.defineProperty(e.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),e}();t.Board=e}(MathPuzzle||(MathPuzzle={}));var MathPuzzle;!function(t){var e=function(){function e(t){this._value=null,this._element=t,this._id=Number(this._element.attr("id"))}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this._element.html(t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.activateCell=function(){this._element.css("background-color",t.Configuration.activeCellColor)},e.prototype.deactiveCell=function(){this._element.css("background-color",t.Configuration.deactiveCellColor)},e}();t.Cell=e}(MathPuzzle||(MathPuzzle={}));var MathPuzzle;!function(t){t.Configuration={activeCellColor:"lightsteelblue",deactiveCellColor:"midnightblue",placeholderId:"#game",infoId:"#info",rollbackButton:"#rollback"}}(MathPuzzle||(MathPuzzle={}));var MathPuzzle;!function(t){var e=function(){function t(){}return t.getPossibleCells=function(e){var l=[],o=Number(e.id);return l.push(t.calculateTop(o)),l.push(t.calculateDown(o)),l.push(t.calculateLeft(o)),l.push(t.calculateRight(o)),l.push(t.calculateTopLeft(o)),l.push(t.calculateTopRight(o)),l.push(t.calculateDownLeft(o)),l.push(t.calculateDownRight(o)),l=l.filter(function(t){return t>0&&t<100})},t.calculateTop=function(t){return t-30},t.calculateDown=function(t){return t+30},t.calculateLeft=function(t){return t%10>=3?t-3:-1},t.calculateRight=function(t){return t+3<10*Math.floor((t+10)/10)?t+3:-1},t.calculateTopLeft=function(t){return t-22>=10*Math.floor((t-20)/10)&&t-22<=10*Math.ceil((t-20)/10)?t-22:-1},t.calculateTopRight=function(t){return t-18>=10*Math.floor((t-20)/10)&&t-18<10*Math.floor((t-10)/10)?t-18:-1},t.calculateDownLeft=function(t){return t+18>=10*Math.floor((t+20)/10)&&t+18<10*Math.floor((t+30)/10)?t+18:-1},t.calculateDownRight=function(t){return t+22>=10*Math.floor((t+20)/10)&&t+22<10*Math.floor((t+30)/10)?t+22:-1},t}();t.CoordinateCalculator=e}(MathPuzzle||(MathPuzzle={}));var MathPuzzle;!function(t){var e=function(){function e(){this._currentValue=1}return e.prototype.start=function(){this._board=new t.Board(this)},e.prototype.notify=function(e){1==this._currentValue?(e.value=this._currentValue,this.activePossibleCells(e),this._currentValue++,this._currentCell=e):t.CoordinateCalculator.getPossibleCells(this._currentCell).indexOf(e.id)<0||null!==e.value?this.showMessage("Invalid Cell"):(this.showMessage(""),e.value=this._currentValue,this.deactivatePossibleCells(this._currentCell),console.log(this.getAvailableCellIds(e).length),0==this.getAvailableCellIds(e).length&&this.showMessage("Your are Locked"),this.activePossibleCells(e),this._currentValue++,this._currentCell=e)},e.prototype.getAvailableCellIds=function(e){var l=this;return t.CoordinateCalculator.getPossibleCells(e).filter(function(t){return null==l._board.cells[t].value})},e.prototype.activePossibleCells=function(t){this._board.activeCells(this.getAvailableCellIds(t))},e.prototype.deactivatePossibleCells=function(e){this._board.deactivateCells(t.CoordinateCalculator.getPossibleCells(e))},e.prototype.showMessage=function(e){$(t.Configuration.infoId).html(e)},e}();t.GameController=e}(MathPuzzle||(MathPuzzle={}));var game=new MathPuzzle.GameController;game.start();